<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">

  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css">
 
  <script>
var dojoConfig = {
  async: true,
  packages: [{
        name: 'dgrid',
        location: 'http://cdn.rawgit.com/SitePen/dgrid/v0.4.0'
    }, {
        name: 'dstore',
        location: 'http://cdn.rawgit.com/SitePen/dstore/v1.0.0'
  }, {
    name: 'dmodel',
    location: 'http://cdn.rawgit.com/SitePen/dmodel/master'
    }, {
        name: 'xstyle',
        location: 'http://cdn.rawgit.com/kriszyp/xstyle/v0.2.1'
    }, {
        name: 'put-selector',
        location: 'http://cdn.rawgit.com/kriszyp/put-selector/v0.3.6'
  }]
};
  </script>
  <script src='http://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js'></script>

  <script>

    require([
    'dojo/dom',
    'dojo/on',
    'dojo/_base/declare',
    'dgrid/OnDemandGrid',
    'dstore/Memory',
    'dstore/Trackable',
    'dmodel/Model',
    "dmodel/ComputedProperty",
    'dojo/domReady!'
], function (dom, on, declare, OnDemandGrid, Memory, Trackable, Model, ComputedProperty) {
   
 console.log('tigidou');




  console.log('tigidou');
// var model = new (declare(Model, {
  var CalendarModel = declare(Model, {
				schema: {
                                        
      label: 'string',
      relative: 'numeric',
      position: 'numeric',
      class: new ComputedProperty({
        dependsOn: ['position'],
        getValue: function(position){
          return position % 2 ? "uneven" : "even";
        }
      }),
      ident: new ComputedProperty({ 
        dependsOn: ['position'],
        getValue: function(position){
          return "cd" + position;
        }
      }),

				},
				validateOnSet: false
			});

   var obj1 = new CalendarModel({ label: 'toto',
                              relative: 10,
                              position: 100,
			});

                        console.log(obj1);
                        console.log(obj1.get('label'));
                        console.log(obj1.get('position'));
                        console.log(obj1.get('class'));

   var obj2 = new CalendarModel({ label: 'titi',
                              relative: 11,
                              position: 101,
			});

                        console.log(obj2);
                        console.log(obj2.get('label'));
                        console.log(obj2.get('position'));
                        console.log(obj2.get('class'));

   var obj3 = new CalendarModel({ label: 'tutu',
                              relative: 12,
                              position: 102,
			});

                        console.log(obj3);
                        console.log(obj3.get('label'));
                        console.log(obj3.get('position'));
                        console.log(obj3.get('class'));


    var TrackableMemory = declare([ Memory, Trackable ]);


  var calendarStore = new TrackableMemory({
    Model: CalendarModel,
    idProperty: "position",
  });

  calendarStore.addSync(obj1);
  calendarStore.addSync(obj2);
  calendarStore.addSync(obj3);
  calendarStore.addSync({label:'tata', relative:13, position:103 });
  console.log(calendarStore);
  console.log(calendarStore.getSync(103));
  var obj103 =  calendarStore.getSync(103);
  console.log(obj103.get('label'));
  console.log(obj103.get('class'));


  









/*
 

/*
                        assert.strictEqual(nameUpdateCount, 1);
			model.set('firstName', 'Jane');
			assert.strictEqual(updatedName, 'Jane Doe');
			assert.strictEqual(nameUpdateCount, 2);
			var updatedName2;
			var handle = model.observe('name', function (name) {
				updatedName2 = name;
			});
			assert.strictEqual(updatedName2, 'Jane Doe');

			model.set('lastName', 'Smith');
			assert.strictEqual(updatedName, 'Jane Smith');
			assert.strictEqual(updatedName2, 'Jane Smith');
			assert.strictEqual(nameUpdateCount, 3);
			handle.remove();

			model.set({
				firstName: 'John',
				lastName: 'Doe'
			});
			assert.strictEqual(updatedName, 'John Doe');
			assert.strictEqual(updatedName2, 'Jane Smith');
			assert.strictEqual(nameUpdateCount, 4);
			model.set('name', 'Adam Smith');
			assert.strictEqual(updatedName, 'Adam Smith');
			assert.strictEqual(model.get('firstName'), 'Adam');
			assert.strictEqual(model.get('lastName'), 'Smith');
			assert.strictEqual(nameUpdateCount, 5);
			assert.strictEqual(updatedName2, 'Jane Smith');
			var then = new Date(1000000);
			model.set('birthDate', then);
			assert.strictEqual(model.get('birthDate').getTime(), 1000000);
			var updatedDate, now = new Date();
			model.observe('birthDate', function (newDate) {
				updatedDate = newDate;
			});
			model.set('birthDate', now);
			assert.strictEqual(updatedDate.getTime(), now.getTime());*/
    });

  </script>


  <title>remove all items in dstore</title>

  
</head>

<body class="claro">

</body>

</html>


